local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/scripthubs1/scripture-hub/refs/heads/main/key-for-orion'))()
local Window = OrionLib:MakeWindow({Name = "Scripture Key System", HidePremium = false, SaveConfig = true, ConfigFolder = "ScriptureKeyConfig"})

-- Predefined key
_G.Key = "FreeKeyBah2"
_G.KeyInput = ""  -- Default value set to an empty string

-- Correct key notification function
function CorrectKey()
    OrionLib:MakeNotification({
        Name = "Correct Key!",
        Content = "You have inputted the correct key!",
        Image = "rbxassetid://4483345998",
        Time = 5
    })
end

-- Incorrect key notification function
function IncorrectKey()
    OrionLib:MakeNotification({
        Name = "Incorrect Key!",
        Content = "You have inputted the wrong key!",
        Image = "rbxassetid://4483345998",
        Time = 5
    })
end

-- Function to load the script hub if the key is correct
function CreateScriptHub()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/scripthubs1/scripture-hub/refs/heads/main/scripture-hub.txt", true))()
end

-- Create the Key System tab
local KeyTab = Window:MakeTab({
    Name = "Key System",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local KeySection = KeyTab:AddSection({
    Name = "Key System V1"
})

-- Create the Discord Server tab
local DiscordTab = Window:MakeTab({
    Name = "Discord Server",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local DiscordSection = DiscordTab:AddSection({
    Name = "Key System V1"
})

-- Add labels in the Discord tab
DiscordTab:AddLabel("Join the discord for the key to the Best FTAP Script!")
DiscordTab:AddLabel("https://discord.gg/ttbHpTVBtt")

-- Add a textbox for the user to input the key
KeyTab:AddTextbox({
    Name = "Enter Key",
    Default = "Input Key!",
    TextDisappear = true,  -- Text disappears after typing
    Callback = function(Value)
        _G.KeyInput = Value  -- Store the input value
    end
})

-- Add a button to check the key and trigger the appropriate functions
KeyTab:AddButton({
    Name = "Check Key!",
    Callback = function()
        -- Check if the input key matches the predefined key
        if _G.KeyInput == _G.Key then
            CreateScriptHub()  -- Load the script hub if the key is correct
            CorrectKey()  -- Notify the user that the key is correct

            -- Broadcast a message in the chat
            local Players = game:GetService("Players")
            local player = Players.LocalPlayer

            -- Wait for the character to load and then send the message
            player.CharacterAdded:Connect(function(character)
                -- Ensure that the character's humanoid is loaded
                repeat wait() until character:FindFirstChild("Humanoid")
                
                -- Wait a bit before firing the chat message
                wait(1)
                
                -- Send the message
                game:GetService("ReplicatedStorage"):WaitForChild("DefaultChatSystemChatEvents")
                    :WaitForChild("SayMessageRequest"):FireServer("Scripture Hub ❯ The Next Generation ❯ Made by Mini0n & Flash", "All")
            end)

            task.wait(5)
            OrionLib:Destroy()  -- Destroy the window after successful key entry and script load
        else
            IncorrectKey()  -- Notify the user that the key is incorrect
        end
    end
})

-- Add the discord link in the KeyTab (correct placement)
KeyTab:AddLabel("Join the discord for the key to the Best FTAP Script!")
KeyTab:AddLabel("https://discord.gg/ttbHpTVBtt")

-- Initialize OrionLib to display the window
OrionLib:Init()
